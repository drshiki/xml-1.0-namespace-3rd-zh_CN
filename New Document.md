#XML1.0命名空间（第3版）
##W3C推荐规范 2009年12月8日
此版本：
[http://www.w3.org/TR/2009/REC-xml-names-20091208/](http://www.w3.org/TR/2009/REC-xml-names-20091208/)

最新版本：
[http://www.w3.org/TR/xml-names/](http://www.w3.org/TR/xml-names/)

以前的版本：
[http://www.w3.org/TR/2006/REC-xml-names-20060816/](http://www.w3.org/TR/2009/PER-xml-names-20090806/)

请参考此文档的勘误表，此上可能包含规范的修正

另请参阅译版

亦提供此文档的非规范格式：XML版本和高亮显示相对第二版更新部分的HTML版本

##摘要
XML命名空间提供了一种简单的方式将可扩展标记文档中使用的标记和属性和以URI标识的命名空间联系起来以达到限制那些标记和属性的效果。

##文档状态
这一节描述了此文档出版时候的状态，其他文档可以能会替代此文档，直至当前w3c的出版列表以及相关的技术报告能够在http://www.w3.org/TR/的W3C技术报告索引中找到。

此文档是w3c核心工作组的作为w3c xml活动的一个产品，英语版本是唯一的规范版本，其他的翻译版本请参阅http://www.w3.org/2003/03/Translations/byTechnology?technology=xml-names

广为人知的实现记录在命名空间1.1实现报告中（所有已知的命名空间1.1实现都支持命名空间1.0），xml测试套件页面亦提供了一个xml测试套件。

第三版包含了直到出版日期为止所有已知的勘误表内容，取代了之前的2006年8月16版。

此版本已被广泛接受，只是对2009年8月6日的提议规范的小幅修改。

请将此文档的错误发送至xml-names-editor@w3.org，可以在此获得公开的文档归案，可以在http://www.w3.org/XML/2009/xml-names-errata查阅此文档的勘误表。

此文档已被w3c成员，软件开发者，以及其他w3c工作组和感兴趣的团体接受，并且被董事会批准作为w3c推荐规范，这是一份稳定的文档并且可以作为参考材料或者被其他文档引用，w3c扮演着吸引注意以及促进此文档的广泛使用的角色，以增强网络的功能性和互操作性。

w3c维护一个与工作组交付物相关的公开专利信息列表，页面亦包括了公开一项专利的说明，

##目录
1.目的和概要

1.1符号与使用

2.XML命名空间

2.1基本概念

2.2使用URI作为命名空间名字

2.3比较URI引用

3.声明命名空间

4.受限的名字

5.使用受限的名字

6.在元素与属性中应用命名空间

6.1命名空间作用域

6.2默认命名空间

6.3唯一性属性

7.文档一致性

8.处理器一致性

##附录
A.规范引用

B.其他引用（非规范）

C.xml命名空间内部结构（非规范）

D.1.0版本后的修改（非规范）

E.致谢（非规范）

F.独立产品（非规范）

##1.目的和概要

我们预想到在xml的应用当中，一个xml文档可能包含来自多个软件模块定义的元素和属性（此处为标记词汇），命名空间的目的之一是确保模块化：重用那些在软件中易于理解的词汇比重新起用新词来的更好。

此文档讨论识别和冲突的问题，且包含多个标记词汇表。软件模块需要具备在遇到一些软件包企图使用那些与其他软件包中使用的相同的元素名和属性名时发生”冲突“也可以处理那些需要被处理的元素和属性的能力。

这些考虑要求文档构造机制具有名字构造机制以避免上文中提及的冲突，这份说明书描述了一种以通过指定拓展名的方式达到这种要求的机制，xml命名空间。

###1.1符号和使用

在本文档强调的地方，使用以下关键字，必须，不允许，必需，应该，不应该，可以。

牢记有许多的非终结符是在xml说明书中定义的而不是在此文档中定义的，而那些在此文档中定义的且又在xml说明书定义且它们具有相同的名字的非终结符，在任何情况下此文档中的终结符将将匹配xml说明书中的非终结符所匹配字符串的子集。

在此文档说明中，NSC是指“命名空间约束”，是准守此规范的文档中必须准守的规则。


##2.XML命名空间

###2.1基本概念

[定义：一个命名空间以一个URI引用标识，运用此文档所描述的机制，元素和属性的名字可以放置于xml命名空间内]

[定义：一个拓展名由命名空间名字和本地名字组成][定义：例如名字N在一个以I标识的命名空间内，那么I就是命名空间名字；例如N不在任一个命名空间内，那么就说命名空间名字为空][定义：以上两种情况中的N都是本地名字]统一管理URI和本地名字可以高效的避免名字冲突。

URI引用可能包含不允许在名字中使用的字符，并且很长造成使用不便，所以拓展名并不在xml文档的元素和属性命名中直接使用，而是使用受限命.[定义：受限名是一个被解释为命名空间的名字]在遵守此规范的文档中，元素和属性名使用受限名，在句法构成上或以带前缀或无前缀的方式出现。提供了一种基于属性声明的方式去将一个前缀和命名空间名字进行绑定，和将无前缀的元素名字和默认命名空间进行绑定，这些声明作用于他们出现的元素上，所以文档中的各个部分可能使用不同的绑定。遵守此文档的处理器必须识别和解释这些声明和前缀。

###2.2使用URI作为命名空间名字

尽管空字符串是一个合法的URI引用，但是不可以作为一个命名空间名字。

在命名空间声明中反对使用相对URI，包括同文档引用。

**注：**

反对使用相对URI是经过w3cXML全体投票决定的，这也说明了之后一些说明书例如DOM,xPath等等都不会对它们进行解释。

###2.3比较URI引用

URI引用标识名将在判断一个名字是否属于所指定的命名空间或者比较两个名字是否属于同一个命名空间的时候发生比较。

[定义：两个URI将会被作为字符串对待，当且仅当它们表示的字符串是相同的时候它们表示同一个事物，也就是，它们是同样的字符序列]比较过程是大小写敏感的，且没有转义字符会被转换。

这个结论也就是说，它们表示不同的事物但可能指向相同的资源，它们和URI引用的差异仅仅发生在它们包含大小写，转义字符，或者基于一些具有不同基URI外部实体的情况下。（注：相对URI引用是被反对在命名空间命名中使用的）

在一个命名空间声明中，URI引用是属性的规范化值，所以XML字符替换和实体引用将在任何比较之前完成。

例如：

以下URI分别标识不同的命名空间，因为他们大小写不同

ttp://www.example.org/wine

http://www.Example.org/wine

http://www.example.org/Wine

以下URI也分别标识不同的命名空间

http://www.example.org/~wilbur

http://www.example.org/%7ewilbur

http://www.example.org/%7Ewilbur

为了避免和上述URI解引用时指向同样的资源的情况混淆，强烈反对在命名空间命名中使用%转义字符。

##3.声明命名空间

[定义：命名空间（或者更准确的说是命名空间绑定）是通过使用一族保留的属性去声明的，这些属性的名字必须是xmlns或者是以xmlns:的字符串，和其他属性一样，可以直接指定或者使用默认值]

命名空间声明中的属性命名规则

	[1]   	NSAttName	   ::=   	PrefixedAttName
									| DefaultAttName
	[2]   	PrefixedAttName	   ::=   	'xmlns:' NCName	[NSC: 保留的前缀和命名空间名字]
	[3]   	DefaultAttName	   ::=   	'xmlns'
	[4]   	NCName	   ::=   	Name - (Char* ':' Char*)	/* 不带“:”的XML名字 */

此属性的规范化的值必须为任意一个URI引用-命名空间名字标识一个命名空间-或一个空字符串，命名空间应该具备唯一性和永久性使得它可以保证预期工作效果。它的目的不是直接用于检索模式（如果存在的话），统一资源命名是被设计成这种目的的一个语法例子，然而，原始URL可以通过这种方法管理去实现同样的目的。


[定义：如果属性名匹配PrefixedAttName，那么NCName部分将提供命名空间前缀，用于将命名空间声明所在的元素的作用域内的元素，属性名和命名空间声明中属性的规范值关联起来]

[定义：如果属性名匹配DefaultAttName，那么命名空间声明中属性的规范值就是自声明所在元素作用域内的默认命名空间]默认命名空间和覆盖声明将在6.在元素与属性中应用命名空间中讨论。

命名空间声明的一个例子，将前缀edi和命名空间名字 http://ecommerce.example.org/schema相关联：

	<x xmlns:edi='http://ecommerce.example.org/schema'>
	  <!-- "edi" 前缀和http://ecommerce.example.org/schema绑定
	       ”x“元素的内容 -->
	</x>

**命名空间约束：保留的前缀和命名空间名字**

xml前缀定义性地与命名空间名字http://www.w3.org/XML/1998/namespace绑定，它可以，但不需要被声明，且不允许绑定到任何其他命名空间名字，其它前缀也不允许绑定到这个命名空间名字，且它不可以被声明用作默认命名空间。

前缀xmlns定义性地仅被声明用作与命名空间名字 http://www.w3.org/2000/xmlns/绑定，它不允许被声明，其他的前缀不允许和这个命名空间名字绑定，且它不允许被声明用作默认命名空间，元素名中不允许包含此前缀。

任何以X，M，L（不区分大小写）这三个字母顺序开头的是保留名，这意味着，

用户不应该使用它们，除非以后的说明书中有相关定义。

处理器不应该把它们当做致命错误。

##4.受限名

在遵守此规范的文档中，一些名字（和非终结符名相对应）必须以以下定义的受限名的形式出现：

受限名

	[7]   	QName	   ::=   	PrefixedName
								| UnprefixedName
	[8]   	PrefixedName	   ::=   	Prefix ':' LocalPart
	[9]   	UnprefixedName	   ::=   	LocalPart
	[10]   	Prefix	   ::=   	NCName
	[11]   	LocalPart	   ::=   	NCName

prefix提供了受限名的命名空间前缀部分，且必须和某个命名空间中使用的URI引用相关联。[定义：localpart提供了受限名的本地部分]

要注意的是前缀的作用仅是作为命名空间名字的占位符，应用程序在构造那些超出包含那些受限名的文档的作用范围的情况下使用的应该是命名空间名字而不是前缀。

##5.使用受限名

在遵守此规范的文档中，元素名必须以以下定义的受限名的形式出现：

元素名

	[12]   	STag	   ::=   	'<' QName (S Attribute)* S? '>' 	[NSC: Prefix Declared]
	[13]   	ETag	   ::=   	'</' QName S? '>'	[NSC: Prefix Declared]
	[14]   	EmptyElemTag	   ::=   	'<' QName (S Attribute)* S? '/>'	[NSC: Prefix Declared]

一个使用受限名用作元素名的例子：
	
	  <!-- the 'price' element's namespace is http://ecommerce.example.org/schema -->
	  <edi:price xmlns:edi='http://ecommerce.example.org/schema' units='Euro'>32.18</edi:price>

属性或以命名空间声明形式，或以以下定义的受限名出现：

属性
	
	[15]   	Attribute	   ::=   	NSAttName Eq AttValue
				| QName Eq AttValue	[NSC: Prefix Declared]
					[NSC: No Prefix Undeclaring]
					[NSC: Attributes Unique]、

一个使用受限名用作属性名的例子：

	<x xmlns:edi='http://ecommerce.example.org/schema'>
	  <!-- the 'taxClass' attribute's namespace is http://ecommerce.example.org/schema -->
	  <lineItem edi:taxClass="exempt">Baby food</lineItem>
	</x>

命名空间约束：前缀声明

命名空间前缀除了是xml或者xmlns的情况下，必须在使用该前缀的开始标签处的或者祖先元素的命名空间属性中已被声明。

命名空间约束：无前缀声明

